# ===========================================
# CALM Admin - Production Configuration
# ===========================================
# ALL SENSITIVE VALUES MUST BE SET AS ENVIRONMENT VARIABLES!
# Never commit real credentials to version control.
# ===========================================

# Server Configuration
server.port=${PORT:8080}

# Database Configuration - PostgreSQL for persistence across deploys
# Render provides DATABASE_URL in postgres:// format, Spring needs jdbc:postgresql://
# Use SPRING_DATASOURCE_URL env var in Render (jdbc:postgresql://host:port/dbname)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:file:./data/calm_admin_prod}
spring.datasource.driverClassName=${DATABASE_DRIVER:org.postgresql.Driver}
spring.datasource.username=${DATABASE_USERNAME:}
spring.datasource.password=${DATABASE_PASSWORD:}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=${HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}

# DISABLE H2 Console in Production!
spring.h2.console.enabled=false

# AWS S3 Configuration - Metadata Bucket (vonage-pruebas)
aws.s3.metadata.bucket=vonage-pruebas
aws.s3.metadata.region=us-east-1
aws.s3.metadata.accessKeyId=${AWS_S3_METADATA_ACCESS_KEY}
aws.s3.metadata.secretAccessKey=${AWS_S3_METADATA_SECRET_KEY}
aws.s3.metadata.prefix=in-person-recording/

# AWS S3 Configuration - Transcriptions Bucket (poc-video-aws)
aws.s3.transcriptions.bucket=poc-video-aws
aws.s3.transcriptions.region=us-east-1
aws.s3.transcriptions.accessKeyId=${AWS_S3_TRANSCRIPTIONS_ACCESS_KEY}
aws.s3.transcriptions.secretAccessKey=${AWS_S3_TRANSCRIPTIONS_SECRET_KEY}
aws.s3.transcriptions.prefix=calm/transcripciones/

# OpenAI Configuration (FROM ENVIRONMENT VARIABLE)
openai.api.key=${OPENAI_API_KEY}
openai.model=${OPENAI_MODEL:gpt-5.1-chat-latest}

# CORS - Set your production domain
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# JWT Configuration (FROM ENVIRONMENT VARIABLE - MUST BE STRONG!)
# Generate with: openssl rand -base64 64
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Admin User (FROM ENVIRONMENT VARIABLES)
admin.username=${ADMIN_USERNAME:admin}
admin.password=${ADMIN_PASSWORD}

# Rate Limiting
rate.limit.login.attempts=${RATE_LIMIT_LOGIN:5}
rate.limit.login.duration=${RATE_LIMIT_DURATION:60}

# Logging - Don't expose stack traces
server.error.include-stacktrace=never
server.error.include-message=never
logging.level.root=WARN
logging.level.com.calm.admin=INFO
