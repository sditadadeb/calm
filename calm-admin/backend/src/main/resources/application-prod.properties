# ===========================================
# CALM Admin - Production Configuration
# ===========================================
# ALL SENSITIVE VALUES MUST BE SET AS ENVIRONMENT VARIABLES!
# Never commit real credentials to version control.
# ===========================================

# Server Configuration
server.port=${PORT:8080}

# Database Configuration (Use PostgreSQL or MySQL in production)
spring.datasource.url=${DATABASE_URL:jdbc:h2:file:./data/calm_admin_prod}
spring.datasource.driverClassName=${DATABASE_DRIVER:org.h2.Driver}
spring.datasource.username=${DATABASE_USERNAME:sa}
spring.datasource.password=${DATABASE_PASSWORD:}
spring.jpa.hibernate.ddl-auto=validate

# DISABLE H2 Console in Production!
spring.h2.console.enabled=false

# AWS S3 Configuration - Metadata Bucket (FROM ENVIRONMENT VARIABLES)
aws.s3.metadata.bucket=${AWS_METADATA_BUCKET}
aws.s3.metadata.region=${AWS_REGION:us-east-1}
aws.s3.metadata.accessKeyId=${AWS_ACCESS_KEY_ID}
aws.s3.metadata.secretAccessKey=${AWS_SECRET_ACCESS_KEY}
aws.s3.metadata.prefix=${AWS_METADATA_PREFIX:in-person-recording/}

# AWS S3 Configuration - Transcriptions Bucket (FROM ENVIRONMENT VARIABLES)
aws.s3.transcriptions.bucket=${AWS_TRANSCRIPTIONS_BUCKET}
aws.s3.transcriptions.region=${AWS_REGION:us-east-1}
aws.s3.transcriptions.accessKeyId=${AWS_ACCESS_KEY_ID}
aws.s3.transcriptions.secretAccessKey=${AWS_SECRET_ACCESS_KEY}
aws.s3.transcriptions.prefix=${AWS_TRANSCRIPTIONS_PREFIX:calm/transcripciones/}

# OpenAI Configuration (FROM ENVIRONMENT VARIABLE)
openai.api.key=${OPENAI_API_KEY}
openai.model=${OPENAI_MODEL:gpt-4o-mini}

# CORS - Set your production domain
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# JWT Configuration (FROM ENVIRONMENT VARIABLE - MUST BE STRONG!)
# Generate with: openssl rand -base64 64
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Admin User (FROM ENVIRONMENT VARIABLES)
admin.username=${ADMIN_USERNAME:admin}
admin.password=${ADMIN_PASSWORD}

# Rate Limiting
rate.limit.login.attempts=${RATE_LIMIT_LOGIN:5}
rate.limit.login.duration=${RATE_LIMIT_DURATION:60}

# Logging - Don't expose stack traces
server.error.include-stacktrace=never
server.error.include-message=never
logging.level.root=WARN
logging.level.com.calm.admin=INFO
